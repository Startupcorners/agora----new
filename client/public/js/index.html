<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Newsletter Builder</title>

    <link rel="stylesheet" href="https://unpkg.com/@grapesjs/studio-sdk/dist/style.css">
    <script src="https://unpkg.com/@grapesjs/studio-sdk/dist/index.umd.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/mjml-browser@4.15.3/lib/index.js"></script>

    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        #studio-editor {
            height: 100dvh;
        }
    </style>
</head>

<body>
    <div id="studio-editor"></div>

    <script type="module">
        /* â”€â”€â”€ CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        const PARENT_ORIGIN = 'https://startupcorners.com';
        const LICENSE_KEY = '72e8117â€¦a41b';

        const qs = new URLSearchParams(location.search);
        const projectId = qs.get('project_id') || `proj-${Date.now()}`;
        const userId = qs.get('user_id') || `user-${Date.now()}`;

        GrapesJsStudioSDK.createStudioEditor({
            root: '#studio-editor',
            theme: 'light',
            licenseKey: LICENSE_KEY,

            /* ğŸ‘‡ the important part */
            project: {
                type: 'email',
                id: projectId,

                /*  This is your starter layout.  */
                default: {
                    pages: [
                        {
                            /* NOTE the singular key:  component (not components) */
                            component: `
          <mjml>
            <mj-body>
              <mj-section background-color="#ffffff" padding="40px 20px">
                <mj-column>
                  <mj-text align="center" font-size="22px" font-weight="bold" color="#333333" padding-bottom="10px">
                    âœï¸ Program Description
                  </mj-text>
                  <mj-divider border-color="#dddddd" border-width="1px" padding-bottom="15px" />
                  <mj-text font-size="16px" color="#777777" line-height="1.6">
                    This is a placeholder description for your program. You can edit this section to describe what your program is about â€” who it's for, what they'll learn or experience,
                    and why it's special.
                  </mj-text>
                  <mj-text font-size="16px" color="#999999" font-style="italic" padding-top="10px">
                    âœ¨ Example: â€œOur 8-week bootcamp helps early-stage startups validate their idea, build MVPs, and pitch to investors.â€
                  </mj-text>
                </mj-column>
              </mj-section>
            </mj-body>
          </mjml>`.trim(),
                        },
                    ],
                },
            },

            identity: { id: userId },
            storage: { type: 'cloud', autosaveChanges: 100, autosaveIntervalMs: 10_000 },
            assets: { storageType: 'cloud' },
            experimental: { disablePremiumPlugins: true },

            onReady(editor) {
                window.editorInstance = editor;
                parent.postMessage({ type: 'studio-ready' }, PARENT_ORIGIN);
            },
        })
            .catch(err => {
                console.error('[Studio Init Error]', err);
                parent.postMessage(
                    { type: 'studio-error', message: err?.message ?? String(err), stack: err?.stack ?? '' },
                    PARENT_ORIGIN,
                );
            });
    </script>
      
</body>

</html>